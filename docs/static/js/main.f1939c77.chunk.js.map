{"version":3,"sources":["components/Gallery/Gallery.module.scss","components/Parallax/Parallax.module.scss","App.module.scss","assets sync nonrecursive /.(png|jpe?g|svg|webp)$/i","assets/2017-09-06.JPG","assets/2017-10-26.JPG","assets/2017-11-12.JPG","assets/2017-11-15.JPG","assets/2017-11-17.JPG","assets/2017-11-26.JPG","assets/2017-11-28.JPG","assets/2017-12-14.JPG","assets/2017-12-17.JPG","assets/2018-03-17.JPG","assets/2018-07-21.JPG","assets/2018-08-25.JPG","assets/2018-09-16.JPG","assets/2019-03-02.JPG","assets/2019-04-17.JPG","assets/2019-05-16.JPG","assets/2019-12-25.JPG","assets/2020-02-09.JPG","assets/2020-12-09.jpg","assets/2020-12-13.jpg","assets/2020-12-29.jpg","components/Parallax/Parallax.constant.ts","components/Parallax/Parallax.tsx","App.context.tsx","utils/index.ts","App.constant.ts","components/Gallery/Gallery.tsx","App.tsx","App.hook.ts","serviceWorker.ts","index.tsx"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","currentTarget","currentTargetRect","currentTargetRectExtend","transform","degX","degY","updateTarget","target","options","style","undefined","withRectCenter","throttledUpdateTargetRectCenter","throttle","halfWidth","getBoundingClientRect","width","halfHeight","height","centerX","x","centerY","y","window","addEventListener","centerDiff","clampDiff","Parallax","children","className","innerClassName","innerStyle","outerRef","useRef","innerRef","useEffect","outer","current","inner","handleUpdateTracingTarget","removeEventListener","styles","parallax","ref","parallaxInner","AppContext","React","createContext","defineProperty","Array","prototype","get","this","length","r","getAnchor","index","time","assets","require","console","log","TIME_DATA","reduce","acc","cur","base","split","last","date","title","desc","push","path","error","Gallery","props","useContext","screenSize","isInitialized","timeDispatch","wrapperRef","source","indexOf","scrollTo","top","behavior","handleWheel","left","scrollLeft","targetTime","Math","floor","payload","deltaY","preventDefault","gallery","wrapperLayer","item","key","image","src","alt","loading","App","delay","useState","initialized","setInitialized","setTimeout","useInitializedDelay","interval","setScreenSize","updaterRef","useCallback","debounce","innerWidth","innerHeight","useScreenSize","useReducer","state","action","location","hash","assign","Number","href","contextValue","Provider","value","app","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.f1939c77.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"Gallery_gallery__3QA38\",\"wrapperLayer\":\"Gallery_wrapperLayer__2dORA\",\"parallax\":\"Gallery_parallax__3NvMc\",\"image\":\"Gallery_image__PqfaU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"parallax\":\"Parallax_parallax__3knlt\",\"parallaxInner\":\"Parallax_parallaxInner__1XcMw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__29_xJ\"};","var map = {\n\t\"./2017-09-06.JPG\": 18,\n\t\"./2017-10-26.JPG\": 19,\n\t\"./2017-11-12.JPG\": 20,\n\t\"./2017-11-15.JPG\": 21,\n\t\"./2017-11-17.JPG\": 22,\n\t\"./2017-11-26.JPG\": 23,\n\t\"./2017-11-28.JPG\": 24,\n\t\"./2017-12-14.JPG\": 25,\n\t\"./2017-12-17.JPG\": 26,\n\t\"./2018-03-17.JPG\": 27,\n\t\"./2018-07-21.JPG\": 28,\n\t\"./2018-08-25.JPG\": 29,\n\t\"./2018-09-16.JPG\": 30,\n\t\"./2019-03-02.JPG\": 31,\n\t\"./2019-04-17.JPG\": 32,\n\t\"./2019-05-16.JPG\": 33,\n\t\"./2019-12-25.JPG\": 34,\n\t\"./2020-02-09.JPG\": 35,\n\t\"./2020-12-09.jpg\": 36,\n\t\"./2020-12-13.jpg\": 37,\n\t\"./2020-12-29.jpg\": 38\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 17;","module.exports = __webpack_public_path__ + \"static/media/2017-09-06.68984ab9.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2017-10-26.bbbe139b.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2017-11-12.a8aa0a49.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2017-11-15.e1de0b5e.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2017-11-17.7283891d.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2017-11-26.6c25f2e7.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2017-11-28.1c7ea919.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2017-12-14.016bed29.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2017-12-17.466d5165.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2018-03-17.553f8e1f.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2018-07-21.96cc8caa.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2018-08-25.529d9ec4.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2018-09-16.a6ab3b37.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2019-03-02.0537eace.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2019-04-17.8375e91e.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2019-05-16.4318c1f5.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2019-12-25.9506544e.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2020-02-09.65a83164.JPG\";","module.exports = __webpack_public_path__ + \"static/media/2020-12-09.1f8d3ab6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/2020-12-13.8a214628.jpg\";","module.exports = __webpack_public_path__ + \"static/media/2020-12-29.3ea9b0e3.jpg\";","import { throttle } from 'lodash'\r\n\r\n/*\r\n * Base attrs\r\n */\r\nlet currentTarget: HTMLDivElement | undefined\r\nlet currentTargetRect: DOMRect | undefined\r\nlet currentTargetRectExtend: {\r\n  centerX: number\r\n  centerY: number\r\n  halfWidth: number\r\n  halfHeight: number\r\n} | undefined\r\n\r\n/*\r\n * Get Style\r\n */\r\nexport const transform = (degX: number, degY: number) => `perspective(512px) translate3d(0, 0, 0) rotateX(${-degY}deg) rotateY(${degX}deg)`\r\n\r\n/*\r\n * Reset\r\n */\r\nexport const resetTarget = () => {\r\n  // Guard\r\n  if (!currentTarget) return\r\n  // Reset style\r\n  currentTarget.style.transform = transform(0, 0)\r\n  // Reset rect\r\n  currentTarget = undefined\r\n  currentTargetRect = undefined\r\n  currentTargetRectExtend = undefined\r\n}\r\n\r\n/*\r\n * Update current cache target\r\n */\r\nexport const updateTarget = (target: HTMLDivElement, options: { withRectCenter: boolean }) => {\r\n  if (!currentTarget || currentTarget !== target) {\r\n    // Reset last before update\r\n    resetTarget()\r\n    // Update current\r\n    currentTarget = target\r\n  }\r\n  if (options.withRectCenter) {\r\n    throttledUpdateTargetRectCenter()\r\n  }\r\n}\r\n\r\n/*\r\n * Update current rect center at scrolling\r\n */\r\nexport const updateTargetRectCenter = () => {\r\n  // Guard\r\n  if (!currentTarget) return\r\n  // Calc rect\r\n  currentTargetRect = currentTarget.getBoundingClientRect()\r\n  const halfWidth = currentTargetRect.width / 2\r\n  const halfHeight = currentTargetRect.height / 2\r\n  currentTargetRectExtend = {\r\n    centerX: currentTargetRect.x + halfWidth,\r\n    centerY: currentTargetRect.y + halfHeight,\r\n    halfWidth,\r\n    halfHeight,\r\n  }\r\n}\r\nexport const throttledUpdateTargetRectCenter = throttle(updateTargetRectCenter, 300)\r\nwindow.addEventListener('scroll', throttledUpdateTargetRectCenter)\r\n\r\n/*\r\n * Update pointerCenter with rectCenter diff at mouse moving\r\n */\r\nconst DEG_CLAMP = 3\r\nexport const handleTracing = (e: MouseEvent) => {\r\n  // Guard\r\n  if (!currentTarget) return\r\n  if (!currentTargetRectExtend) return\r\n  // Diff\r\n  const centerDiff = {\r\n    x: e.x - currentTargetRectExtend.centerX,\r\n    y: e.y - currentTargetRectExtend.centerY,\r\n  }\r\n  // Clamp\r\n  const clampDiff = {\r\n    x: centerDiff.x / currentTargetRectExtend.halfWidth * DEG_CLAMP,\r\n    y: centerDiff.y / currentTargetRectExtend.halfHeight * DEG_CLAMP,\r\n  }\r\n  // Apply style to current target\r\n  currentTarget.style.transform = transform(clampDiff.x, clampDiff.y)\r\n}\r\nwindow.addEventListener('mousemove', handleTracing)\r\n","// Libs\r\nimport React, { CSSProperties, HTMLAttributes, ReactElement, useEffect, useRef } from 'react'\r\n// Styles\r\nimport styles from './Parallax.module.scss'\r\n// Utils\r\nimport { updateTarget } from './Parallax.constant'\r\n\r\ninterface Props extends HTMLAttributes<HTMLDivElement> {\r\n  children: ReactElement\r\n  className?: string\r\n  style?: CSSProperties\r\n  innerClassName?: string\r\n  innerStyle?: CSSProperties\r\n}\r\n\r\nconst Parallax = ({ children, className, style, innerClassName, innerStyle }: Props) => {\r\n\r\n  const outerRef = useRef<HTMLDivElement>(null)\r\n  const innerRef = useRef<HTMLDivElement>(null)\r\n\r\n  useEffect(() => {\r\n    const outer = outerRef.current\r\n    const inner = innerRef.current!\r\n    const handleUpdateTracingTarget = () => updateTarget(inner, { withRectCenter: true })\r\n    // const handleCancelTracingTarget = () => resetTarget()\r\n    outer?.addEventListener('mouseover', handleUpdateTracingTarget)\r\n    // outer?.addEventListener('mouseleave', handleCancelTracingTarget)\r\n    return () => {\r\n      outer?.removeEventListener('mouseover', handleUpdateTracingTarget)\r\n      // outer?.removeEventListener('mouseleave', handleCancelTracingTarget)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div className={`${styles.parallax}${className ? ` ${className}` : ''}`} ref={outerRef} style={style}>\r\n      <div className={`${styles.parallaxInner}${innerClassName ? ` ${innerClassName}` : ''}`} style={innerStyle} ref={innerRef}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Parallax\r\n","import React from 'react'\r\n\r\nexport interface AppContextValue {\r\n  // Flags\r\n  isInitialized: boolean\r\n  // Global\r\n  screenSize: Size\r\n  // Time\r\n  time: Time\r\n  timeDispatch: (action: TimeAction) => void\r\n}\r\n\r\nexport const AppContext = React.createContext({} as AppContextValue)\r\n","/*eslint no-extend-native: [\"error\", { \"exceptions\": [\"Array\"] }]*/\r\n// Array prototype enhancement\r\nObject.defineProperty(Array.prototype, 'first', {\r\n  get: function () {\r\n    return this[0]\r\n  }\r\n})\r\nObject.defineProperty(Array.prototype, 'last', {\r\n  get: function () {\r\n    return this[this.length - 1]\r\n  }\r\n})\r\n\r\n// Load Assets\r\nexport const loadAllFrom = (r: __WebpackModuleApi.RequireContext) => r.keys().map(r)\r\n\r\n// Anchor\r\nexport const getAnchor = (index: number, time?: Time) => `${index}`\r\n\r\n// Clamp\r\nexport const clamp = (target: number, limit: number) => Math.min(Math.max(target, -limit), limit)\r\n","// Utils\r\nimport { loadAllFrom } from './utils'\r\n// Assets\r\nexport const assets = loadAllFrom(require.context('./assets', false, /\\.(png|jpe?g|svg|webp)$/i)) as string[]\r\nconsole.log(assets)\r\n\r\nexport const TIME_DATA = assets.reduce((acc, cur) => {\r\n  try {\r\n    const base = (cur.split('/').last?.split('.') || [])[0].split('·')\r\n    const date = base[0]\r\n    const title = base[1]\r\n    const desc = base[2]\r\n    acc.push({ title, desc, date, path: cur })\r\n  } catch (e) {\r\n    console.error('Loading asset error:', e)\r\n  }\r\n  return acc\r\n}, [] as Time[])\r\n","// Libs\r\nimport s from 'classnames'\r\nimport { throttle } from 'lodash'\r\nimport React, { useContext, useEffect, useRef } from 'react'\r\n// Styles\r\nimport styles from './Gallery.module.scss'\r\n// Components\r\nimport Parallax from 'components/Parallax'\r\n// Utils\r\nimport { AppContext } from 'App.context'\r\nimport { TIME_DATA } from 'App.constant'\r\n\r\ninterface Props {}\r\n\r\nconst Gallery = (props: Props) => {\r\n\r\n  // Context\r\n  const { isInitialized, screenSize, time, timeDispatch } = useContext(AppContext)\r\n\r\n  // Refs\r\n  const wrapperRef = useRef<HTMLDivElement>(null)\r\n\r\n  // Sync the scrolling position from selected time\r\n  useEffect(() => {\r\n    if (time && time.source !== 'gallery') {\r\n      // Set the scrollLeft with selected time\r\n      const index = TIME_DATA.indexOf(time)\r\n      wrapperRef.current?.scrollTo({\r\n        top: index * screenSize.width,\r\n        behavior: time.source === 'initial' ? 'auto' : 'smooth',\r\n      })\r\n    }\r\n  }, [screenSize, time])\r\n\r\n  // Sync the Timeline from scrolling position\r\n  useEffect(() => {\r\n    // Saving the ref reference with effect closure for cleanup the eventListener correctly\r\n    const ref = wrapperRef.current\r\n    const throttleUpdate = throttle(() => {\r\n      const left = ref?.scrollLeft || 0\r\n      const targetTime = TIME_DATA[Math.floor(left / screenSize.width)]\r\n      timeDispatch({ source: 'gallery', payload: targetTime })\r\n    }, 200)\r\n    const handleWheel = (e: MouseWheelEvent) => {\r\n      if (ref) {\r\n        // throttleUpdate()\r\n        if (e.deltaY) {\r\n          e.preventDefault()\r\n          // Transform the vertical scrolling to horizontal\r\n          ref.scrollLeft = ref.scrollLeft + e.deltaY\r\n        }\r\n      }\r\n    }\r\n    ref?.addEventListener('wheel', handleWheel)\r\n    return () => ref?.removeEventListener('wheel', handleWheel)\r\n  }, [screenSize, timeDispatch])\r\n\r\n  return (\r\n    <main className={styles.gallery}>\r\n\r\n      <div ref={wrapperRef} className={styles.wrapperLayer}>\r\n        {\r\n          TIME_DATA.map((item, index) => (\r\n            <section key={index}>\r\n              <Parallax innerClassName={styles.parallax}>\r\n                <img\r\n                  className={styles.image}\r\n                  src={item.path}\r\n                  alt={item.title}\r\n                  loading=\"lazy\"\r\n                />\r\n              </Parallax>\r\n            </section>\r\n          ))\r\n        }\r\n      </div>\r\n\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Gallery\r\n","// Libs\r\nimport React, { useEffect, useReducer } from 'react'\r\n// Styles\r\nimport './App.reset.scss'\r\nimport styles from './App.module.scss'\r\n// Components\r\nimport Timeline from './components/Timeline'\r\nimport Gallery from './components/Gallery'\r\n// Utils\r\nimport { AppContext } from './App.context'\r\nimport { useInitializedDelay, useScreenSize } from './App.hook'\r\n// Assets\r\nimport { TIME_DATA } from './App.constant'\r\nimport { getAnchor } from './utils'\r\n\r\nfunction App () {\r\n\r\n  // Global\r\n  const isInitialized = useInitializedDelay()\r\n  const screenSize = useScreenSize()\r\n\r\n  // Time\r\n  const [time, timeDispatch] = useReducer((state: Time, action: TimeAction): Time => {\r\n    if (typeof action.payload === 'number') {\r\n      // With index\r\n      window.location.hash = getAnchor(action.payload)\r\n      return Object.assign(TIME_DATA[action.payload], { source: action.source })\r\n    } else {\r\n      // With payload\r\n      window.location.hash = getAnchor(TIME_DATA.indexOf(action.payload))\r\n      return Object.assign(action.payload, { source: action.source })\r\n    }\r\n  }, TIME_DATA[0])\r\n\r\n  // State Recover\r\n  useEffect(() => {\r\n    if (window.location.hash) {\r\n      try {\r\n        // Recover the selected time\r\n        const index = window.location.hash.split('#')[1].split('-')[0]\r\n        timeDispatch({ source: 'initial', payload: Number(index) })\r\n      } catch (e) {\r\n        // Clean hash\r\n        window.location.href = window.location.href.split('#')[0]\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Context\r\n  const contextValue = {\r\n    // Flags\r\n    isInitialized,\r\n    // Global\r\n    screenSize,\r\n    // Time\r\n    time,\r\n    timeDispatch,\r\n  }\r\n\r\n  return (\r\n    <AppContext.Provider value={contextValue}>\r\n      <div className={styles.app}>\r\n        {/*<Timeline/>*/}\r\n        <Gallery/>\r\n      </div>\r\n    </AppContext.Provider>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import { debounce } from 'lodash'\r\nimport { useCallback, useEffect, useState } from 'react'\r\n\r\n// Read window size from browser\r\nexport function useScreenSize (interval = 300) {\r\n  const [screenSize, setScreenSize] = useState<Size>({ width: 0, height: 0 })\r\n  const updaterRef = useCallback(debounce(() => setScreenSize({\r\n    width: window.innerWidth,\r\n    height: window.innerHeight\r\n  }), interval), [])\r\n  useEffect(() => {\r\n    window.addEventListener('resize', updaterRef)\r\n    updaterRef()\r\n    return () => window.removeEventListener('resize', updaterRef)\r\n  }, [updaterRef])\r\n  return screenSize\r\n}\r\n\r\n// Gain the Initialized flag with specific delay\r\nexport function useInitializedDelay (delay = 50) {\r\n  const [initialized, setInitialized] = useState(false)\r\n  useEffect(() => {setTimeout(() => setInitialized(true), delay)}, [delay])\r\n  return initialized\r\n}\r\n\r\n// interface useEventListenerThrottleOptions extends AddEventListenerOptions {\r\n//   target?: HTMLElement\r\n//   deps: DependencyList\r\n//   throttleWait?: number\r\n//   throttleSettings?: ThrottleSettings\r\n// }\r\n//\r\n// export function useEventListenerThrottle (type: keyof WindowEventMap, listener: EventListener, options?: boolean | useEventListenerThrottleOptions) {\r\n//   useEffect(() => {\r\n//     // Saving the ref reference with effect closure for cleanup the eventListener correctly\r\n//     const optionsObject = typeof options === 'object' ? options : {} as useEventListenerThrottleOptions\r\n//     const { target = window, deps, throttleWait, throttleSettings, ...restOptions } = optionsObject\r\n//     const eventListenerOptions = typeof options === 'object' ? restOptions : options\r\n//     const throttledHandler = throttle(listener, throttleWait, throttleSettings)\r\n//     target.addEventListener('wheel', throttledHandler, eventListenerOptions)\r\n//     return () => target.removeEventListener('wheel', throttledHandler, eventListenerOptions)\r\n//   }, [...(typeof options === 'object' ? options.deps : []), listener, options])\r\n// }\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}